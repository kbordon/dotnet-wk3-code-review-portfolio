@model IEnumerable<Portfolio.Models.Post>
 
@{
    ViewData["Title"] = "Portfolio :: Blog"; 
    Layout = "~/Views/Shared/_Layout.cshtml"; 
}

@using System.Security.Claims

@if (User.Identity.IsAuthenticated)
{
    @User.Identity.Name
    <p id="create">Add Post</p>
}

<div id="form"></div>

@if (Model.Any())  
{
foreach (var post in Model)
    {
        <div class="post">
            <p class="edit-id">@post.PostId</p>      
            <p>@Html.DisplayFor(model => post.Title)</p>
            <p>@post.Date.ToString("MMM dd, yyyy @ h:mm t")</p>
            <p>@Html.DisplayFor(model => post.Content)</p>
            @if(User.Identity.IsAuthenticated)
            {
                <span class="edit">Edit</span>
                <span class="delete">Delete</span>
            }
            <span class="comment-add">Add a Comment</span>
            <div class="comment-form"></div> 
            @if(post.Comments.Any())
            {
                <p>Comments (@post.Comments.Count)</p>
                <div class="comments"></div>
            }
        </div> 
    } 
}
else
{
    <p><em>No posts yet.</em></p>
}

